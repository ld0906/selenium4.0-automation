<html>
<head>
  <title>Selenium 验证码练习</title>
  <meta charset="utf-8">
</head>
<body>
    <div>
     <label >验证码：</label><br>
     <canvas id="code_id" width="300" height="130" onclick="dc()"
	  style="border: 1px solid #ccc; border-radius: 5px;"></canvas>
  </div>
</body>
<script>
 var show_char = [];
 draw_code(show_char);
function dc(){
 draw_code(show_char);
 }

function draw_code(show_char) {
        var canvas_width=document.getElementById('code_id').clientWidth;
        var canvas_height=document.getElementById('code_id').clientHeight;
        var canvas = document.getElementById("code_id");
        var context = canvas.getContext("2d");
        canvas.width = canvas_width;
        canvas.height = canvas_height;
        var chars = "1,2,3,4,5,6,7,8,9,0,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,yz";
        var chars = chars.split(",");
        var len = chars.length;

        for (var i = 0; i <= 3; i++) {
            var j = Math.floor(Math.random() * len);
            var degrees = Math.random() * 5 * Math.PI / 180;
            var txt = chars[j];
            show_char[i] = txt;
            var x = 30 + i * 40;
            var y = 60 + Math.random() * 10;
            context.font = "bold 40px 微软雅黑";

            context.translate(x, y);
            context.rotate(degrees);
            context.fillText(txt, 0, 0);

            context.translate(-x, -y);
            context.rotate(-degrees);

        }


    }

</script>


</html>
